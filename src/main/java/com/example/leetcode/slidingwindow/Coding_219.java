package com.example.leetcode.slidingwindow;

import java.util.HashSet;
import java.util.Set;

/**
 * @author: kaiÂ·yang
 * @Date: 2024/3/22 16:34
 * @Description:
 *
 * LeetCode: ã€219ã€‘å­˜åœ¨é‡å¤å…ƒç´ 
 * Difficultyï¼šeasy
 * <link> https://leetcode.cn/problems/contains-duplicate-ii/description/
 */
public class Coding_219 {

    /**
     * ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° k ï¼Œåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨ä¸¤ä¸ª ä¸åŒçš„ç´¢å¼• i å’Œ j ï¼Œæ»¡è¶³ nums[i] == nums[j] ä¸” abs(i- j) <= k ã€‚å¦‚æœå­˜åœ¨ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚
     *
     *  ç¤ºä¾‹ 1ï¼š
     *
     * è¾“å…¥ï¼šnums = [1,2,3,1], k = 3
     * è¾“å‡ºï¼štrue
     *  ç¤ºä¾‹ 2ï¼š
     *
     * è¾“å…¥ï¼šnums = [1,0,1,1], k = 1
     * è¾“å‡ºï¼štrue
     *  ç¤ºä¾‹ 3ï¼š
     *
     * è¾“å…¥ï¼šnums = [1,2,3,1,2,3], k = 2
     * è¾“å‡ºï¼šfalse
     *
     *
     *  æç¤ºï¼š
     *
     *  1 <= nums.length <= 105
     *  -109 <= nums[i] <= 109
     *  0 <= k <= 105
     *
     *  Related Topics æ•°ç»„ å“ˆå¸Œè¡¨ æ»‘åŠ¨çª—å£
     *  ğŸ‘ 693 ğŸ‘ 0
     */

    /**
     * æ»‘åŠ¨çª—å£
     * æ€è·¯ï¼š ä¸¤ä¸ªå…ƒç´ ä¸‹æ ‡çš„ç»å¯¹å€¼è¦ <= k,  æ‰€ä»¥ä¸€ä¸ªæ»‘åŠ¨çª—å£çš„å…ƒç´ ä¸è¶…è¿‡ k + 1 ä¸ªï¼Œæ»¡è¶³ä»»æ„ä¸¤ä¸ªå…ƒç´ å°æ ‡å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡kï¼Œå¦‚æœå­˜åœ¨è¦ç»™æ»‘åŠ¨çª—å£
     *       å…¶ä¸­æœ‰é‡å¤å…ƒç´ ï¼Œåˆ™å­˜åœ¨ ä¸¤ä¸ªä¸åŒä¸‹æ ‡ i å’Œ j æ»¡è¶³ nums[i] = nums[j] ä¸” |i - j| <= k,å¦‚æœæ»‘åŠ¨çª—å£ä¸­æ²¡æœ‰é‡å¤çš„å…ƒç´ ï¼Œåˆ™ä¸ç¬¦åˆè¦æ±‚
     *
     *       å¦‚æœä¸€ä¸ªæ»‘åŠ¨çª—å£çš„ç»“æŸä¸‹æ ‡ä¸º iï¼Œåˆ™è¯¥æ»‘åŠ¨çª—å£å¼€å§‹çš„ä¸‹æ ‡æ˜¯ max(0, i - k),ç”¨å“ˆå¸Œæ ‡ä¿å­˜æ»‘åŠ¨çª—å£çš„å…ƒç´ ï¼Œä»å·¦åˆ°å³éå† nums
     *       æ»‘åŠ¨çª—å£æ¯å‘å³ç§»åŠ¨ä¸€ä½ï¼Œå·¦è¾¹å°±è¦ç§»é™¤ä¸€ä½
     *       1ã€å¦‚æœ i > k åˆ™ä¸‹æ ‡ i - k - 1å¤„çš„å…ƒç´ è¢«ç§»å‡ºçª—å£ï¼Œé™nums[ i - k - 1]ä»å“ˆå¸Œè¡¨ä¸­åˆ é™¤
     *       2ã€åˆ¤æ–­ nums[i] æ˜¯å¦å­˜åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œå¦‚æœå­˜åœ¨è¿”å›trueï¼Œå¦‚æœä¸å­˜åœ¨åˆ™å°†å…ƒç´ åŠ å…¥ å“ˆå¸Œè¡¨ä¸­
     *       3ã€éå†ç»“æŸæ—¶å¦‚æœæ»‘åŠ¨çª—å£éƒ½æ²¡æœ‰é‡å¤å…ƒç´ ï¼Œåˆ™è¿”å›false
     * @param nums
     * @param k
     * @return
     */
    public boolean containsNearbyDuplicate(int[] nums, int k) {
        if(nums == null || nums.length <= 1 ){
            return false;
        }
        Set<Integer> set = new HashSet<>();
        for (int i = 0; i < nums.length; i++){
            //æ»‘åŠ¨çª—å£æ¯å‘å³ç§»åŠ¨ä¸€ä½ï¼Œå·¦è¾¹å°±è¦ç§»é™¤ä¸€ä½
            //i ä¸ºæ»‘åŠ¨çª—å£çš„æœ‰è¾¹ç•Œï¼Œå½“ i == k æ—¶çª—å£è¾¾åˆ°æœ€å¤§ï¼Œ i - kä¸ºçª—å£çš„å·¦è¾¹ç•Œ
            //æ‰€ä»¥i å‘å³ç§»åŠ¨ä¸€ä½ï¼Œå·¦è¾¹ç•Œå‘å³ç§»åŠ¨ä¸€ä½ï¼Œå³è¦åˆ é™¤ i - k - 1 ä½å…ƒç´ 
            if ( i > k){
                set.remove( nums[i - k - 1]);
            }
            if (!set.add(nums[i])){
                return true;
            }
        }
        return false;
    }

}
